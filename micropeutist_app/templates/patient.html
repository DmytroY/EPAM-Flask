{% extends "layout.html" %}

{% block title %}
    <p>Patient record</p>
{% endblock %}

{% block body %}

<div class="person_block">
    <div class="photo">
        <img src="face.jpg" width="150" height="150" alt="photo of person">
    </div>
    <div class="name_title">
        {{ data["first_name"] }} {{ data["last_name"] }}
    </div>
</div>

<div class="patient_data">
    <table class="table">
    <tr>
        <td>First Name</td>
        <td>{{ data["first_name"] }}</td>
    </tr>
    <tr>
        <td>Last Name</td>
        <td>{{ data["last_name"] }}</td>
    </tr>
    <tr>
        <td>Gender</td>
        <td>{{ data["gender"] }}</td>
    </tr>
    <tr>
        <td>Birthday</td>
        <td>{{ data["birthday"] }}</td>
    </tr>
    <tr>
        <td>Health State</td>
        <td>{{ data["health_state"] }}</td>
    </tr>
    <tr>
        <td>email</td>
        <td>{{ data["email"]}}</td>
    </tr>
    <tr>
        <td>Doctor</td>
        <td>
            <a href="{{url_for('doctor', id=data.doctor['id'])}}">
                {{ data.doctor["first_name"]}} {{ data.doctor["last_name"]}}
            </a>
        </td>
    </tr>
    </table>
</div> 


<div class="buttons_block">
    <form action="/edit_patient" method="get">
        <button class="button" type="submit" name="id" value={{ data["id"] }}>EDIT</button>
    </form>

    <button class="button" onclick="confirmation()">DELETE</button>
    <script>
        function confirmation(){
            if (confirm("Do you confirm deletion?") == true) {
                alert("Deleted !");
                const del_url = {{ url_for("remove_patient", id=data['id'])|tojson }}
                fetch(del_url).then(
                    response => {
                        if (response.redirected) {window.location = response.url;}
                    });
            };
        };
    </script>

</div>
{% endblock %}